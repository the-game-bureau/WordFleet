<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Word Fleet - Pen & Paper Mode</title>
  <link rel="icon" type="image/x-icon" href="src/media/wf.ico">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Favicon and App Icons -->
  <link rel="icon" type="image/x-icon" href="src/media/wf.ico">
  <link rel="shortcut icon" href="src/media/wf.ico">
  
  <!-- Apple Touch Icons -->
  <link rel="apple-touch-icon" sizes="57x57" href="src/media/apple-touch-icon-57x57-precomposed.png">
  <link rel="apple-touch-icon" sizes="57x57" href="src/media/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="76x76" href="src/media/apple-touch-icon-76x76-precomposed.png">
  <link rel="apple-touch-icon" sizes="76x76" href="src/media/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="src/media/apple-touch-icon-120x120-precomposed.png">
  <link rel="apple-touch-icon" sizes="120x120" href="src/media/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="src/media/apple-touch-icon-152x152-precomposed.png">
  <link rel="apple-touch-icon" sizes="152x152" href="src/media/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="167x167" href="src/media/apple-touch-icon-167x167-precomposed.png">
  <link rel="apple-touch-icon" sizes="167x167" href="src/media/apple-touch-icon-167x167.png">
  <link rel="apple-touch-icon" sizes="180x180" href="src/media/apple-touch-icon-180x180-precomposed.png">
  <link rel="apple-touch-icon" sizes="180x180" href="src/media/apple-touch-icon-180x180.png">
  <link rel="apple-touch-icon" href="src/media/apple-touch-icon.png">
  
  <!-- Safari Pinned Tab -->
  <link rel="mask-icon" href="src/media/safari-pinned-tab.svg" color="#6aaa64">
  
  <!-- Web App Manifest -->
  <link rel="manifest" href="src/media/site.webmanifest">
  
  <!-- Apple Web App Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Word Fleet">
<link rel="stylesheet" href="wf.css">
</head>
<body>
<!-- START: NAVIGATION BAR -->
<div class="nav-container">
  <nav class="nav">
    <!-- Brand -->
    <a href="index.html" class="nav-brand">Word Fleet</a>

    <!-- Desktop Navigation -->
    <ul class="nav-links">
      <li><a href="index.html" class="nav-link">Home Port</a></li>
      <li><a href="pandp.html" class="nav-link">Pen & Paper Mode</a></li>
      <li><a href="rules.html" class="nav-link">Rules of Engagement</a></li>
      <li><a href="codes.html" class="nav-link">Who Goes First?</a></li>
      <li><a href="future.html" class="nav-link">Future Deployments</a></li>
      <li><a href="#" onclick="window.print(); return false;" class="nav-link">Print</a></li>
    </ul>

    <!-- Mobile Hamburger Button -->
    <button class="nav-toggle" id="navToggle">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </nav>

  <!-- Mobile Menu Overlay -->
  <div class="mobile-menu" id="mobileMenu">
    <ul class="nav-links">
      <li><a href="index.html" class="nav-link">Home Port</a></li>
      <li><a href="pandp.html" class="nav-link">Pen & Paper Mode</a></li>
      <li><a href="rules.html" class="nav-link">Rules of Engagement</a></li>
      <li><a href="codes.html" class="nav-link">Who Goes First?</a></li>
      <li><a href="future.html" class="nav-link">Future Deployments</a></li>
      <li><a href="#" onclick="window.print(); return false;" class="nav-link">Print</a></li>
    </ul>
  </div>
</div>
<!-- END: NAVIGATION BAR -->  
<main class="main">
    <h1 class="page-title">Pen & Paper Mode üìù</h1>
    <p class="page-subtitle">Word Fleet</p>
    
    <p class="intro-text">So, grandpa, you've finally convinced someone to play a game with you? Better check your printer's black ink because it's time to introduce these kids to some good old-fashioned, offline entertainment!</p>

    <form id="battleTrackerForm" method="GET" action="tracker.html" onsubmit="return handleBattleTrackerSubmit(event)">
      <div class="feature-grid">
        <section class="feature-card">
          <div class="feature-header">
            <div class="feature-number">01</div>
            <h2 class="feature-title">Name Your Fleet</h2>
          </div>
          <p class="feature-description">
            Choose a commanding name for your naval fleet. Will you lead the Storm Raiders into battle, 
            or command the Iron Guardians to victory? A strong fleet name strikes fear into enemy hearts.
          </p>
          <div class="fleet-form-container">
            <div class="fleet-form">
              <div class="fleet-input-group">
                <input 
                  type="text" 
                  id="fleetNameInput" 
                  name="fleet"
                  class="fleet-input" 
                  placeholder="Enter your fleet name..."
                  maxlength="30"
                  required
                >
                <button type="button" class="fleet-input-button" onclick="generateFleetName()" title="Generate random fleet name">
                  üé≤
                </button>
              </div>
            </div>
          </div>
        </section>
        
        <section class="feature-card">
          <div class="feature-header">
            <div class="feature-number">02</div>
            <h2 class="feature-title">Configure Your Word-Ships</h2>
          </div>
          <p class="feature-description">
            Choose between auto-generated word-ships or manually select your own words. Each ship type serves a tactical purpose - from the mighty 5-letter KETCH to the nimble 2-letter PT boat.
          </p>
          <div class="fleet-form-container">
            <div class="fleet-form">
              <div class="toggle-container">
                <div class="toggle-buttons">
                  <button type="button" class="toggle-btn active" id="autoBtn" onclick="setMode('auto')">
                    Auto-Generated
                  </button>
                  <button type="button" class="toggle-btn" id="manualBtn" onclick="setMode('manual')">
                    Manual Selection
                  </button>
                </div>
                
                <!-- Hidden input to track mode -->
                <input type="hidden" name="mode" id="modeInput" value="auto">
                
                <div class="manual-words" id="manualWords">
                  <div class="word-group">
                    <label class="word-label">KETCH ‚Ä¢ 5-Letter Word-ship</label>
                    <input type="text" class="word-input" maxlength="5" placeholder="Enter 5 letters..." name="word5" oninput="validateWordInput(this)" pattern="[A-Za-z]{5}">
                  </div>
                  <div class="word-group">
                    <label class="word-label">SHIP ‚Ä¢ 4-Letter Word-ship</label>
                    <input type="text" class="word-input" maxlength="4" placeholder="Enter 4 letters..." name="word4" oninput="validateWordInput(this)" pattern="[A-Za-z]{4}">
                  </div>
                  <div class="word-group">
                    <label class="word-label">SUB ‚Ä¢ 3-Letter Word-ship</label>
                    <input type="text" class="word-input" maxlength="3" placeholder="Enter 3 letters..." name="word3a" oninput="validateWordInput(this)" pattern="[A-Za-z]{3}">
                  </div>
                  <div class="word-group">
                    <label class="word-label">ARK ‚Ä¢ 3-Letter Word-ship</label>
                    <input type="text" class="word-input" maxlength="3" placeholder="Enter 3 letters..." name="word3b" oninput="validateWordInput(this)" pattern="[A-Za-z]{3}">
                  </div>
                  <div class="word-group">
                    <label class="word-label">PT ‚Ä¢ 2-Letter Word-ship</label>
                    <input type="text" class="word-input" maxlength="2" placeholder="Enter 2 letters..." name="word2" oninput="validateWordInput(this)" pattern="[A-Za-z]{2}">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <section class="feature-card">
          <div class="feature-header">
            <div class="feature-number">03</div>
            <h2 class="feature-title">Get Your Battle Tracker</h2>
          </div>
          <p class="feature-description">
            Download or print your Battle Trackers and let slip the dogs of war!
          </p>
          <div class="fleet-form-container">
            <div class="fleet-form">
              <button type="submit" class="fleet-submit-btn">
                Generate Battle Tracker
              </button>
            </div>
          </div>
        </section>
      </div>
    </form>
  </main>

  <script>
    // Fleet name generation
    const fleetNames = {
      adjectives: [
        'Salty', 'Barnacle-Crusted', 'Rum-Soaked', 'Royal', 'Crabby', 'Peg-Legged', 'Black', 'Stormy', 'Treacherous', 'Cursed', 'Ghostly', 'Iron-Bound', 'Sea-Worn',
        'Soggy-Bottom', 'Windswept', 'Mullet-Class', 'Scurvy Dog', 'Leaky Hull',
        'Ironclad', 'Dreadnought', 'Ghost Flag', 'Thunderhead', 'Bloodwake', 'Scurvy',
        'Admiral\'s', 'Captain\'s', 'Commodore\'s', 'Flagship', 'Armored', 'Steel-Hulled',
        'Battle-Ready', 'Storm-Battered', 'Salt-Crusted', 'Weather-Beaten', 'Tide-Worn',
        'Rust-Stained', 'Barnacle-Encrusted', 'Sun-Bleached', 'Iron-Fisted', 'Cannon-Heavy',
        'Gun-Blazing', 'Torpedo-Laden', 'Skull & Crossbones', 'Merciless', 'Fearsome',
        'Parrot-Shouldered', 'Grog-Fueled', 'Tricorn-Wearing', 'Hook-Handed', 'Eye-Patched',
        'Beard-Braided', 'Compass-Spinning', 'Ghost Ship', 'Kraken\'s', 'Siren\'s', 'Leviathan\'s',
        'Poseidon\'s', 'Neptune\'s', 'Triton\'s', 'Abyssal', 'Deep-Sea', 'Oceanic', 'Maritime',
        'Nautical', 'Seafaring', 'Davy Jones\'', 'Phantom', 'Half-Sunk', 'Listing',
        'Creaking', 'Groaning', 'Patched-Up', 'Battle-Scarred'
      ],
      nouns: [
        'Armada', 'Fleet', 'Flotilla', 'Squadron', 'Convoy', 'Navy', 'Task Force', 'Krewe',
        'Armament', 'Battlegroup', 'Line', 'Expeditionary Force', 'Regatta', 'Squad',
        'Cohort', 'Division', 'Wing', 'Company', 'Brigade', 'Battalion', 'Unit',
        'Force', 'Command', 'Patrol', 'Strike Force', 'Reconnaissance', 'Vanguard',
        'Reserve', 'Guard', 'Watch', 'Blockade', 'Tide', 'Current', 'Wake', 'Waves',
        'Storm', 'Tempest', 'Gale', 'Maelstrom', 'Admiralty', 'Authority', 'Order',
        'Legion', 'Brotherhood', 'Alliance', 'Coalition', 'Depth', 'Trench', 'Reef',
        'Harbor', 'Bay', 'Strait', 'Channel', 'Passage', 'Assault', 'Siege',
        'Bombardment', 'Offensive', 'Campaign', 'Operation', 'Mission', 'Expedition', 'Dispatch', 'Voyage', 'Odyssey', 'Quest', 'Adventure'
      ]
    };
    let currentMode = 'auto';
    function allLettersSame(word) {
  return word.split('').every(char => char.toUpperCase() === word[0].toUpperCase());
}
    function validateWordInput(input) {
      const value = input.value;
      const maxLength = parseInt(input.maxLength);
      
      // Remove non-letter characters and convert to uppercase
      const cleanValue = value.replace(/[^A-Za-z]/g, '').toUpperCase();
      
      // Update input with clean value
      if (cleanValue !== input.value) {
        input.value = cleanValue;
      }
      
      // Visual validation feedback
      const isValid = cleanValue.length === maxLength && /^[A-Za-z]+$/.test(cleanValue);
      
      if (input.value.length === 0) {
        // Empty - neutral state
        input.classList.remove('error');
        input.style.borderColor = '';
      } else if (isValid) {
        // Valid - green border
        input.classList.remove('error');
        input.style.borderColor = '#10b981';
      } else {
        // Invalid - red border
        input.classList.add('error');
      }
    }

    function generateFleetName() {
      const adj = fleetNames.adjectives[Math.floor(Math.random() * fleetNames.adjectives.length)];
      const noun = fleetNames.nouns[Math.floor(Math.random() * fleetNames.nouns.length)];
      const input = document.getElementById('fleetNameInput');
      const button = document.querySelector('.fleet-input-button');
      
      if (input && button) {
        button.style.transform = 'translateY(-50%) rotate(180deg) scale(1.2)';
        
        setTimeout(() => {
          input.value = `${adj} ${noun}`;
          button.style.transform = 'translateY(-50%)';
        }, 200);
      }
    }

    function setMode(mode) {
      currentMode = mode;
      const manualBtn = document.getElementById('manualBtn');
      const autoBtn = document.getElementById('autoBtn');
      const manualWords = document.getElementById('manualWords');
      const modeInput = document.getElementById('modeInput');
      const wordInputs = document.querySelectorAll('.word-input');
      
      // Update hidden input
      if (modeInput) {
        modeInput.value = mode;
      }
      
      if (mode === 'manual') {
        manualBtn.classList.add('active');
        autoBtn.classList.remove('active');
        manualWords.classList.add('show');
        
        // Make all word inputs required when manual mode is selected
        wordInputs.forEach(input => {
          input.required = true;
        });
      } else {
        autoBtn.classList.add('active');
        manualBtn.classList.remove('active');
        manualWords.classList.remove('show');
        
        // Remove required attribute when auto mode is selected
        wordInputs.forEach(input => {
          input.required = false;
          input.value = ''; // Clear manual inputs in auto mode
          input.style.borderColor = '';
          input.classList.remove('error');
        });
      }
    }

    function resetSubmitButton() {
      const submitBtn = document.querySelector('.fleet-submit-btn');
      if (submitBtn) {
        submitBtn.innerHTML = 'Generate Battle Tracker';
        submitBtn.style.opacity = '1';
        submitBtn.disabled = false;
      }
    }

function handleBattleTrackerSubmit(event) {
  event.preventDefault();
  const fleetInput = document.getElementById('fleetNameInput');
  const submitBtn = event.target.querySelector('button[type="submit"]');
  const modeInput = document.getElementById('modeInput');
  const form = event.target;

  // Check fleet name
  if (!fleetInput.value.trim()) {
    fleetInput.focus();
    fleetInput.style.borderColor = '#ef4444';
    setTimeout(() => fleetInput.style.borderColor = '', 2000);
    return false;
  }

  // Manual mode validation
  if (currentMode === 'manual') {
    const wordInputs = document.querySelectorAll('.word-input');
    let hasErrors = false;
    let firstErrorInput = null;

    wordInputs.forEach(input => {
      const value = input.value.trim();
      const maxLength = parseInt(input.maxLength);
      let hasError = false;

      if (!value) {
        hasError = true;
      } else if (!/^[A-Za-z]+$/.test(value)) {
        hasError = true;
      } else if (value.length !== maxLength) {
        hasError = true;
      } else if (allLettersSame(value)) {
        hasError = true;
      }

      if (hasError) {
        input.style.borderColor = '#ef4444';
        hasErrors = true;
        if (!firstErrorInput) firstErrorInput = input;
        setTimeout(() => input.style.borderColor = '', 3000);
      } else {
        input.style.borderColor = '';
      }
    });

    if (hasErrors) {
      if (firstErrorInput) firstErrorInput.focus();
      return false;
    }
  }

  // Update button state
  submitBtn.innerHTML = '‚öôÔ∏è Generating...';
  submitBtn.style.opacity = '0.7';
  submitBtn.disabled = true;

  const params = new URLSearchParams();
  params.append('fleet', fleetInput.value.trim());

  if (currentMode === 'manual') {
    const wordInputs = document.querySelectorAll('.word-input');
    wordInputs.forEach(input => {
      const value = input.value.trim();
      if (value && /^[A-Za-z]+$/.test(value)) {
        params.append(input.name, value.toUpperCase());
      }
    });
  }

  const resetTimeout = setTimeout(() => {
    resetSubmitButton();
  }, 3000);

  setTimeout(() => {
    try {
      window.location.href = 'tracker.html?' + params.toString();
    } catch (error) {
      console.warn('Navigation failed:', error);
      resetSubmitButton();
      clearTimeout(resetTimeout);
    }
  }, 1000);

  return false;
}

    function initializeFleetName() {
      const input = document.getElementById('fleetNameInput');
      if (!input) return;
      
      // Check URL for fleet parameter
      const urlParams = new URLSearchParams(window.location.search);
      const fleetFromUrl = urlParams.get('fleet');
      
      if (fleetFromUrl) {
        input.value = decodeURIComponent(fleetFromUrl);
      } else {
        // Generate random fleet name as default
        generateFleetName();
      }
    }

    // Initialize everything when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize fleet name and toggle mode
      initializeFleetName();
      setMode('auto');
    });

    // Reset button if user navigates back to this page
    window.addEventListener('pageshow', function(event) {
      if (event.persisted) {
        resetSubmitButton();
      }
    });
  </script>
<script src="scripts.js"></script>  
</body>
</html>