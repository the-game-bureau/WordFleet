<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Word Fleet - Pen & Paper Mode</title>
  <link rel="icon" type="image/x-icon" href="src/media/wf.ico">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Favicon and App Icons -->
  <link rel="icon" type="image/x-icon" href="src/media/wf.ico">
  <link rel="shortcut icon" href="src/media/wf.ico">
  
  <!-- Apple Touch Icons -->
  <link rel="apple-touch-icon" sizes="57x57" href="src/media/apple-touch-icon-57x57-precomposed.png">
  <link rel="apple-touch-icon" sizes="57x57" href="src/media/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="76x76" href="src/media/apple-touch-icon-76x76-precomposed.png">
  <link rel="apple-touch-icon" sizes="76x76" href="src/media/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="120x120" href="src/media/apple-touch-icon-120x120-precomposed.png">
  <link rel="apple-touch-icon" sizes="120x120" href="src/media/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="152x152" href="src/media/apple-touch-icon-152x152-precomposed.png">
  <link rel="apple-touch-icon" sizes="152x152" href="src/media/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="167x167" href="src/media/apple-touch-icon-167x167-precomposed.png">
  <link rel="apple-touch-icon" sizes="167x167" href="src/media/apple-touch-icon-167x167.png">
  <link rel="apple-touch-icon" sizes="180x180" href="src/media/apple-touch-icon-180x180-precomposed.png">
  <link rel="apple-touch-icon" sizes="180x180" href="src/media/apple-touch-icon-180x180.png">
  <link rel="apple-touch-icon" href="src/media/apple-touch-icon.png">
  
  <!-- Safari Pinned Tab -->
  <link rel="mask-icon" href="src/media/safari-pinned-tab.svg" color="#6aaa64">
  
  <!-- Web App Manifest -->
  <link rel="manifest" href="src/media/site.webmanifest">
  
  <!-- Apple Web App Meta Tags -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Word Fleet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #f8f9fa;
      background-image: 
        linear-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px),
        linear-gradient(90deg, rgba(59, 130, 246, 0.1) 1px, transparent 1px),
        linear-gradient(rgba(59, 130, 246, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(59, 130, 246, 0.05) 1px, transparent 1px);
      background-size: 20px 20px, 20px 20px, 100px 100px, 100px 100px;
      background-position: -1px -1px, -1px -1px, -1px -1px, -1px -1px;
      color: #000000;
      line-height: 1.5;
      font-size: 16px;
      font-weight: 400;
    }

    /* Navigation */
    .nav-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #ffffff;
      border-bottom: 1px solid #000000;
      z-index: 1000;
    }

    .nav {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      height: 64px;
    }

    .nav-brand {
      font-weight: 700;
      font-size: 18px;
      color: #000000;
      text-decoration: none;
      letter-spacing: -0.02em;
    }

    .nav-links {
      display: flex;
      gap: 0;
      list-style: none;
    }

    .nav-link {
      color: #000000;
      text-decoration: none;
      padding: 20px 16px;
      font-size: 14px;
      font-weight: 500;
      transition: background-color 0.15s ease;
      border-left: 1px solid #e5e5e5;
    }

    .nav-link:hover {
      background: #f5f5f5;
    }

    /* Main Content */
    .main {
      margin-top: 64px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      padding: 48px 24px;
    }

    .page-title {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 8px;
      letter-spacing: -0.02em;
    }

    .page-subtitle {
      font-size: 16px;
      color: #666666;
      margin-bottom: 48px;
      font-weight: 400;
    }

    .intro-text {
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 48px;
      color: #333333;
    }

    /* Feature Cards */
    .feature-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 32px;
      margin-bottom: 48px;
    }

    .feature-card {
      border: 1px solid #e5e5e5;
      padding: 32px;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(1px);
    }

    .feature-header {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
    }

    .feature-number {
      font-size: 24px;
      font-weight: 700;
      color: #000000;
      background: #f5f5f5;
      padding: 8px 12px;
      border: 1px solid #e5e5e5;
      min-width: 48px;
      text-align: center;
    }

    .feature-title {
      font-size: 20px;
      font-weight: 600;
      letter-spacing: -0.01em;
    }

    .feature-description {
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 24px;
      color: #333333;
    }

    /* Fleet Form Styles */
    .fleet-form-container {
      margin-top: 20px;
      width: 100%;
    }

    .fleet-form {
      display: flex;
      flex-direction: column;
      gap: 15px;
      width: 100%;
    }

    .fleet-input-group {
      position: relative;
      width: 100%;
    }

    .fleet-input {
      width: 100%;
      padding: 12px 50px 12px 15px;
      background: #ffffff;
      border: 1px solid #e5e5e5;
      border-radius: 8px;
      color: #000000;
      font-size: 16px;
      transition: all 0.3s ease;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      box-sizing: border-box;
      min-width: 0;
    }

    .fleet-input:focus {
      outline: none;
      border-color: #000000;
      box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
    }

    .fleet-input-button {
      position: absolute;
      right: 6px;
      top: 50%;
      transform: translateY(-50%);
      width: 32px;
      height: 32px;
      background: #000000;
      border: none;
      border-radius: 6px;
      color: white;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      flex-shrink: 0;
    }

    .fleet-input-button:hover {
      background: #333333;
      transform: translateY(-50%) scale(1.05);
    }

    .fleet-submit-btn {
      padding: 12px 24px;
      background: #000000;
      border: none;
      border-radius: 8px;
      color: white;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    .fleet-submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
    }

    /* Toggle Container Styles */
    .toggle-container {
      background: rgba(0, 0, 0, 0.05);
      border: 1px solid #e5e5e5;
      border-radius: 12px;
      padding: 1.5rem;
      margin-top: 15px;
    }

    .toggle-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      background: #f5f5f5;
      padding: 4px;
      border-radius: 8px;
      margin-bottom: 0;
    }

    .toggle-btn {
      padding: 0.75rem 1rem;
      background: transparent;
      border: none;
      border-radius: 6px;
      color: #666666;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }

    .toggle-btn.active {
      background: #000000;
      color: white;
    }

    .toggle-btn:hover:not(.active) {
      background: rgba(0, 0, 0, 0.05);
      color: #333333;
    }

    .manual-words {
      display: none;
      grid-template-columns: 1fr;
      gap: 1rem;
      padding-top: 1rem;
      border-top: 1px solid #e5e5e5;
      margin-top: 1rem;
    }

    .manual-words.show {
      display: grid;
    }

    .word-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .word-label {
      font-size: 0.75rem;
      font-weight: 600;
      color: #666666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .word-input {
      padding: 0.75rem;
      background: #ffffff;
      border: 1px solid #e5e5e5;
      border-radius: 6px;
      color: #000000;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      text-transform: uppercase;
      transition: all 0.3s ease;
      font-size: 0.9rem;
    }

    .word-input:focus {
      outline: none;
      border-color: #000000;
      box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
    }

    /* Mobile Navigation */
    @media (max-width: 768px) {
      .nav {
        padding: 0 16px;
        height: 56px;
      }

      .nav-brand {
        font-size: 16px;
      }

      .nav-links {
        display: none;
      }

      .main {
        margin-top: 56px;
        padding: 32px 16px;
      }

      .page-title {
        font-size: 28px;
      }

      .feature-card {
        padding: 24px;
      }

      .feature-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
      }

      .feature-number {
        align-self: flex-start;
      }
    }

    @media (min-width: 769px) {
      .nav-toggle {
        display: none;
      }
    }

    @media print {
      .nav-container {
        display: none;
      }
      
      .main {
        margin-top: 0;
      }
    }
    .nav-link.active {
  background: #000000;
  color: #ffffff;
}

.nav-link.active:hover {
  background: #333333;
}
  </style>
</head>
<body>
  <nav class="nav-container">
    <div class="nav">
      <a href="index.html" class="nav-brand">Word Fleet</a>
      <ul class="nav-links">
        <li><a href="index.html" class="nav-link">Home Port</a></li>
        <li><a href="#" class="nav-link active">Pen & Paper Mode</a></li>
        <li><a href="rules.html" class="nav-link">Rules of Engagement</a></li>
        <li><a href="future.html" class="nav-link">Future Deployments</a></li>
        <li><a href="#" onclick="window.print(); return false;" class="nav-link">Print</a></li>
      </ul>
    </div>
  </nav>

  <main class="main">
    <h1 class="page-title">Word Fleet</h1>
    <p class="page-subtitle">üìù Pen & Paper Mode</p>
    
    <p class="intro-text">So, grandpa, you've finally convinced someone to play a game with you? Better check your printer's black ink because it's time to introduce these kids to some good old-fashioned, offline entertainment!</p>

    <form id="battleTrackerForm" action="tracker.html" method="GET" onsubmit="return handleBattleTrackerSubmit(event)">
      <div class="feature-grid">
        <section class="feature-card">
          <div class="feature-header">
            <div class="feature-number">01</div>
            <h2 class="feature-title">Name Your Fleet</h2>
          </div>
          <p class="feature-description">
            Choose a commanding name for your naval fleet. Will you lead the Storm Raiders into battle, 
            or command the Iron Guardians to victory? A strong fleet name strikes fear into enemy hearts.
          </p>
          <div class="fleet-form-container">
            <div class="fleet-form">
              <div class="fleet-input-group">
                <input 
                  type="text" 
                  id="fleetNameInput" 
                  name="fleet"
                  class="fleet-input" 
                  placeholder="Enter your fleet name..."
                  maxlength="30"
                  required
                >
                <button type="button" class="fleet-input-button" onclick="generateFleetName()" title="Generate random fleet name">
                  üé≤
                </button>
              </div>
            </div>
          </div>
        </section>
        
        <section class="feature-card">
          <div class="feature-header">
            <div class="feature-number">02</div>
            <h2 class="feature-title">Configure Your Word-Ships</h2>
          </div>
          <p class="feature-description">
            Choose between auto-generated wordships or manually select your own words. Each ship type serves a tactical purpose - from the mighty 5-letter KETCH to the nimble 2-letter PT boat.
          </p>
          <div class="fleet-form-container">
            <div class="fleet-form">
              <div class="toggle-container">
                <div class="toggle-buttons">
                  <button type="button" class="toggle-btn active" id="autoBtn" onclick="setMode('auto')">
                    Auto-Generated
                  </button>
                  <button type="button" class="toggle-btn" id="manualBtn" onclick="setMode('manual')">
                    Manual Selection
                  </button>
                </div>
                
                <div class="manual-words" id="manualWords">
                  <div class="word-group">
                    <label class="word-label">KETCH ‚Ä¢ 5-Letter Wordship</label>
                    <input type="text" class="word-input" maxlength="5" placeholder="Enter 5 letters..." name="word5">
                  </div>
                  <div class="word-group">
                    <label class="word-label">SHIP ‚Ä¢ 4-Letter Wordship</label>
                    <input type="text" class="word-input" maxlength="4" placeholder="Enter 4 letters..." name="word4">
                  </div>
                  <div class="word-group">
                    <label class="word-label">SUB ‚Ä¢ 3-Letter Wordship</label>
                    <input type="text" class="word-input" maxlength="3" placeholder="Enter 3 letters..." name="word3a">
                  </div>
                  <div class="word-group">
                    <label class="word-label">ARK ‚Ä¢ 3-Letter Wordship</label>
                    <input type="text" class="word-input" maxlength="3" placeholder="Enter 3 letters..." name="word3b">
                  </div>
                  <div class="word-group">
                    <label class="word-label">PT ‚Ä¢ 2-Letter Wordship</label>
                    <input type="text" class="word-input" maxlength="2" placeholder="Enter 2 letters..." name="word2">
                  </div>
                </div>
                
                <input type="hidden" id="wordsMode" name="words" value="auto">
              </div>
            </div>
          </div>
        </section>
        
        <section class="feature-card">
          <div class="feature-header">
            <div class="feature-number">03</div>
            <h2 class="feature-title">Get Your Battle Tracker</h2>
          </div>
          <p class="feature-description">
            Download or print your Battle Trackers and let slip the dogs of war!
          </p>
          <div class="fleet-form-container">
            <div class="fleet-form">
              <button type="submit" class="fleet-submit-btn">
                Generate Battle Tracker
              </button>
            </div>
          </div>
        </section>
      </div>
    </form>
  </main>

  <script>
    // Fleet name generation
    const fleetNames = {
      adjectives: [
        'Salty', 'Barnacle-Crusted', 'Rum-Soaked', 'Royal', 'Crabby', 'Peg-Legged', 'Black', 'Stormy', 'Treacherous', 'Cursed', 'Ghostly', 'Iron-Bound', 'Sea-Worn',
        'Soggy-Bottom', 'Windswept', 'Mullet-Class', 'Scurvy Dog', 'Leaky Hull',
        'Ironclad', 'Dreadnought', 'Ghost Flag', 'Thunderhead', 'Bloodwake', 'Scurvy',
        'Admiral\'s', 'Captain\'s', 'Commodore\'s', 'Flagship', 'Armored', 'Steel-Hulled',
        'Battle-Ready', 'Storm-Battered', 'Salt-Crusted', 'Weather-Beaten', 'Tide-Worn',
        'Rust-Stained', 'Barnacle-Encrusted', 'Sun-Bleached', 'Iron-Fisted', 'Cannon-Heavy',
        'Gun-Blazing', 'Torpedo-Laden', 'Skull & Crossbones', 'Merciless', 'Fearsome',
        'Parrot-Shouldered', 'Grog-Fueled', 'Tricorn-Wearing', 'Hook-Handed', 'Eye-Patched',
        'Beard-Braided', 'Compass-Spinning', 'Ghost Ship', 'Kraken\'s', 'Siren\'s', 'Leviathan\'s',
        'Poseidon\'s', 'Neptune\'s', 'Triton\'s', 'Abyssal', 'Deep-Sea', 'Oceanic', 'Maritime',
        'Nautical', 'Seafaring', 'Davy Jones\'', 'Phantom', 'Half-Sunk', 'Listing',
        'Creaking', 'Groaning', 'Patched-Up', 'Battle-Scarred'
      ],
      nouns: [
        'Armada', 'Fleet', 'Flotilla', 'Squadron', 'Convoy', 'Navy', 'Task Force', 'Krewe',
        'Armament', 'Battlegroup', 'Line', 'Expeditionary Force', 'Regatta', 'Squad',
        'Cohort', 'Division', 'Wing', 'Company', 'Brigade', 'Battalion', 'Unit',
        'Force', 'Command', 'Patrol', 'Strike Force', 'Reconnaissance', 'Vanguard',
        'Reserve', 'Guard', 'Watch', 'Blockade', 'Tide', 'Current', 'Wake', 'Waves',
        'Storm', 'Tempest', 'Gale', 'Maelstrom', 'Admiralty', 'Authority', 'Order',
        'Legion', 'Brotherhood', 'Alliance', 'Coalition', 'Depth', 'Trench', 'Reef',
        'Harbor', 'Bay', 'Strait', 'Channel', 'Passage', 'Assault', 'Siege',
        'Bombardment', 'Offensive', 'Campaign', 'Operation', 'Mission', 'Expedition', 'Dispatch', 'Voyage', 'Odyssey', 'Quest', 'Adventure'
      ]
    };

    let currentMode = 'auto';

    function generateFleetName() {
      const adj = fleetNames.adjectives[Math.floor(Math.random() * fleetNames.adjectives.length)];
      const noun = fleetNames.nouns[Math.floor(Math.random() * fleetNames.nouns.length)];
      const input = document.getElementById('fleetNameInput');
      const button = document.querySelector('.fleet-input-button');
      
      if (input && button) {
        button.style.transform = 'translateY(-50%) rotate(180deg) scale(1.2)';
        
        setTimeout(() => {
          input.value = `${adj} ${noun}`;
          button.style.transform = 'translateY(-50%)';
        }, 200);
      }
    }

    function setMode(mode) {
      currentMode = mode;
      const manualBtn = document.getElementById('manualBtn');
      const autoBtn = document.getElementById('autoBtn');
      const manualWords = document.getElementById('manualWords');
      const wordsMode = document.getElementById('wordsMode');
      const wordInputs = document.querySelectorAll('.word-input');
      
      if (mode === 'manual') {
        manualBtn.classList.add('active');
        autoBtn.classList.remove('active');
        manualWords.classList.add('show');
        wordsMode.value = 'manual';
        
        // Make all word inputs required when manual mode is selected
        wordInputs.forEach(input => {
          input.required = true;
        });
      } else {
        autoBtn.classList.add('active');
        manualBtn.classList.remove('active');
        manualWords.classList.remove('show');
        wordsMode.value = 'auto';
        
        // Remove required attribute when auto mode is selected
        wordInputs.forEach(input => {
          input.required = false;
        });
      }
    }

    function resetSubmitButton() {
      const submitBtn = document.querySelector('.fleet-submit-btn');
      if (submitBtn) {
        submitBtn.innerHTML = 'Generate Battle Tracker';
        submitBtn.style.opacity = '1';
        submitBtn.disabled = false;
      }
    }

    function handleBattleTrackerSubmit(event) {
      event.preventDefault();
      const fleetInput = document.getElementById('fleetNameInput');
      const submitBtn = event.target.querySelector('button[type="submit"]');
      const originalText = submitBtn.innerHTML;
      const originalOpacity = submitBtn.style.opacity;
      
      // Check fleet name
      if (!fleetInput.value.trim()) {
        fleetInput.focus();
        fleetInput.style.borderColor = '#ef4444';
        setTimeout(() => fleetInput.style.borderColor = '', 2000);
        return false;
      }
      
      // Check manual word inputs if manual mode is selected
      if (currentMode === 'manual') {
        const wordInputs = document.querySelectorAll('.word-input');
        let hasEmptyFields = false;
        
        wordInputs.forEach(input => {
          if (!input.value.trim()) {
            input.style.borderColor = '#ef4444';
            hasEmptyFields = true;
            setTimeout(() => input.style.borderColor = '', 2000);
          }
        });
        
        if (hasEmptyFields) {
          // Focus on the first empty field
          const firstEmpty = Array.from(wordInputs).find(input => !input.value.trim());
          if (firstEmpty) firstEmpty.focus();
          return false;
        }
      }
      
      // Update button state
      submitBtn.innerHTML = '‚öôÔ∏è Generating...';
      submitBtn.style.opacity = '0.7';
      submitBtn.disabled = true;
      
      // Set timeout to reset button after delay, in case navigation fails
      const resetTimeout = setTimeout(() => {
        resetSubmitButton();
      }, 3000);
      
      // Handle successful navigation or errors
      const handlePageLeave = () => {
        clearTimeout(resetTimeout);
      };
      
      // Listen for page unload to clear timeout
      window.addEventListener('beforeunload', handlePageLeave, { once: true });
      
      // Submit the form after a brief delay
      setTimeout(() => {
        try {
          event.target.submit();
        } catch (error) {
          console.warn('Form submission failed:', error);
          resetSubmitButton();
          clearTimeout(resetTimeout);
        }
      }, 1000);
      
      return false;
    }

    function initializeFleetName() {
      const input = document.getElementById('fleetNameInput');
      if (!input) return;
      
      // Check URL for fleet parameter
      const urlParams = new URLSearchParams(window.location.search);
      const fleetFromUrl = urlParams.get('fleet');
      
      if (fleetFromUrl) {
        input.value = decodeURIComponent(fleetFromUrl);
      } else {
        // Generate random fleet name as default
        generateFleetName();
      }
    }

    // Initialize everything when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize fleet name and toggle mode
      initializeFleetName();
      setMode('auto');
    });

    // Reset button if user navigates back to this page
    window.addEventListener('pageshow', function(event) {
      if (event.persisted) {
        resetSubmitButton();
      }
    });
  </script>
</body>
</html>